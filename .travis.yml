language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- yarn install
before_script: 
script:
- yarn build
after_script:
- cd ./dist
- ls
- git init
- git config user.name "${USERNAME}"
- git config user.email "${EMAIL}"
- git add -A
- git commit -m "deploy"
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
notifications:
  slack:
    rooms:
      secure: a0xc3ecm02zwc2d7wyjNebJO7hBrkOn9eqccU8VuDC01rT3gmCPbzJwQMx67No1oR1PgREuckZSiThtlZ7CHttbf6EFJl+wl2BNYIPQdsqfd8r9CTvZDhkiyOGmy+wrzPxn002rdd5VdzwfC24jMD1nbs/K8VcbvFg4TP1HlQO8Z/JqApisaxxDvGBptfLNZ3fpmhSlO7Gj14yVPMH7RS3XfQC5LTILWd3kzIdZ5ppEQYtDubU+5Vd8iIWDMmOUGM872l+vOmJhnFGd5h4/ynMDbGBTKLIfX8rG6Tmw+zov0OzkHLPNY0ljb6Aeq10H8nAEpRM0HcyVGD/kdwtJb/rIPAredV97Gw7EZbY9DtuiqR4h3fMM7gt8krq9gBXJXg3p0RyX/xqJJogkO4YzGSV8m+hLQjJItsJOiOopGWSZNd3lXm2rEVJa20O+IWHhiEzHNxHlukkRJScmrKqOWDxWSQ0P0Jw7vFE8QQRdtgfdutlLDlG1fYP2OjHT6lzNfep2+7et+AZYaiezHkihhxbZhGr07WUC7UW9AKG//srxAX4WnT0VTn1CTj2dtlPL7Gm/8/ohbcq7Igay0j/UNjY0AqioifYTOHZaK5K5I0NOtmnZDCkk3wg7KGX6E1BqcYE3sMr5H4+KFA/QjTMbMaZ5JnkCGxEJF0MMqF6Cgmow=
    on_success: always
    on_failure: always
    template:
    - Repo `%{repository_slug}`build (<%{build_url}|#%{build_number}>) for commit
      (<%{compare_url}|%{commit}>) on branch `%{branch}` by `%{author}`.
    - 'Execution time: *%{duration}*'
    - 'Message: %{message}'
env:
  global:
  - USERNAME: snowball1990
  - EMAIL: snowballer0705@gmail.com
  - GH_REF: github.com/Damo-web/docs.git
  - BRANCHNAME: gh-pages
