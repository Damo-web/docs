language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- yarn install
before_script: 
script:
- yarn build
after_script:
- cd ./dist
- ls
- git init
- git config user.name "${USERNAME}"
- git config user.email "${EMAIL}"
- git add -A
- git commit -m "deploy"
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
notifications:
  slack:
    rooms:
      secure: "RpzGq3+V2tTeiOHMX9u7r8UmBcr/eGkqLVGVe42Ci5AvZs97ZgqtbOACJEalH4CTGxZbpSnAlhbz5WHC61UfSV4BcI75IKoieFz6/VbOxjY1VdxFLMOX/j914gBcpYUr0phrkSFUfjj9KVgrQ/P0Yh7Pbey5q5aUYr6l93xOxNrKJV+sm04Y6UEhX/45lm+Oog+HgOTe5ZFTksRmCBDcKNErHCfrDx2rZc8w9Rz1c3M9Qn1yk7CiR8C8vRlmk50VPfpbmNaRhkUGi+VRAsucrMOkP3FueGrJobfGFF9vWlcLqT+vLxREZ2AiGe/lGx/aDcEnjiIcqw/KiITHiCToEYHCEDjeW9MLa3kPDmxWhjIb4EqwFvtwrsKpbV5dZ0dr16o1yK7etF1wPiSwpEnb7BHWhdvl79R/NaFie0v9Sj250jHIc5fOZmi1jUww7DH8BWSU0hzAgyhR/yIbWC8U34Mr/augj2w2l4fq86rwr5REQDI8vu9pBxyRbFqqtCmzme9CP6Egungk7YE8kf82h5EfetKEOXUfe6mr9CTE+pDTx7tcmuv2DTBiXbCXrB9+63ZuhjnWUFIAbt5qeEjo+cu55uoqjsHqwzM0DXbPOh08EwNRin7UW3MhmA/EC3dcARuMEjzB+3EE5jLQIV/T1HqpwzKz6t/8fQV9v+UNBTA="
    on_success: always
    on_failure: always
    template:
    - Repo `%{repository_slug}`build (<%{build_url}|#%{build_number}>) for commit
      (<%{compare_url}|%{commit}>) on branch `%{branch}` by `%{author}`.
    - 'Execution time: *%{duration}*'
    - 'Message: %{message}'
env:
  global:
  - USERNAME: snowball1990
  - EMAIL: snowballer0705@gmail.com
  - GH_REF: github.com/Damo-web/docs.git
  - BRANCHNAME: gh-pages
