language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- yarn install
before_script: 
script:
- yarn build
after_script:
- cd ./dist
- ls
- git init
- git config user.name "${USERNAME}"
- git config user.email "${EMAIL}"
- git add -A
- git commit -m "deploy"
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
notifications:
  slack:
    rooms:
      secure: "${SECRRT_VALUE}"
    on_success: always
    on_failure: always
    template:
    - Repo `%{repository_slug}`build (<%{build_url}|#%{build_number}>) for commit
      (<%{compare_url}|%{commit}>) on branch `%{branch}`.
    - 'Execution time: *%{duration}*'
    - 'Message: %{message}'
env:
  global:
  - USERNAME: snowball1990
  - EMAIL: snowballer0705@gmail.com
  - GH_REF: github.com/Damo-web/docs.git
  - BRANCHNAME: gh-pages
  - SECRRT_VALUE: 0A+NkWbRacIAs4GoKwkO9SO0wz27nfwqi7h9ODNMBpzJ8BNXvDsFfdcAG1opcYkTAlM+Gt3ZwE8tws2cbmS0BFtjiZc25fuClRsMIgoF2zADy5yQEQ1MGn6OqBmp5JbHRXoMx/RSJGDhP6ZRXuLYlEmvBfRjML6CfdeKYvwActN8bJen6yoOgPgtEYtmdJ4gIMb4R5CYGmumliO2AhXSTuwgPb/2IXQ7i69Eqk1AbOOLh8ogTMNJMWEc5R/kUvchgVV3HzW68FDAeI6SIEwIkmYWjPvDBLO0rv064wybKh1fW0VyDN5TArbd0/IPGKA1iPwgzl/q/BcsNv2lAMJBdHiWIpHa37sVZo9J9lDe60PumrBJ889rVOfTHaR91R9JywkVqqW7AXEQou+ACT1OQTXGzu8EQtZIP9yOtvEBejRvtnxOBbwO93qgP4GEpz9ZPDQfJAwVQjEGdiKqF9q40+pMlb9ZMrtOx56LCHZNyxjpX1S3W2lm7owTlAyrH3doOfCWl9NSGSjqBso08kdAIULoNh+ea+sqZPb65xNwh6YfMiwFJEERdeJ7FUIzE06IoDcTrNPECi7RTIFYrgsEyGgGttAjSoVtVpQ38IxvstlpexbwVxbgyRza3udRGy6QVfw+kss0z35yIR5Vkz0Z7CI5yCjxzmEwtd1/O49s5w8=
