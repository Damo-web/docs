language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- yarn install
before_script: 
script:
- yarn build
after_script:
- cd ./dist
- ls
- git init
- git config user.name "${USERNAME}"
- git config user.email "${EMAIL}"
- git add -A
- git commit -m "deploy"
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
notifications:
  slack:
    rooms:
      - secure: "Mw6yarXCigB2WbNmTpp3fE3ql6fDnkor6wSrn5TjxkLQfPDyizjTVAQim/yUn2634Hpt/+r4lEyG3tphLfBrzUJOFaVTPhQ/LNDzPc/1wVqGa+YLpe74k6IyQVKPF8s0nAAGdITj8tmdgWimbCUdjeBSU6R7EUunJePMqUCqiSj8WrLMDeh3u28VZ22WSaxXaN9mbQMH+8XpPSziK2ybi8cuoAtOhUEANtdkMPc0XUmVRNj/2eWWFYGHvfCUhVwR/lP8h4ZnybykqSOTbADPNL32o5PQ7RzjDXnq5Qgve9yg5TY6cqiV+CHUhQIRZ1zkgiyhUV2WxSDBFN+ekG/qg44mSZCv3sf/nQyafzsKciRqJC9Lb10fLdfaHwxyy8yfpnJv5z7FkN56zgRp+3XKMBypgtGmuO4iw9FXM0Z4hLOdyzlUeXMSLD67VlUVl/CUgjVc43eXgm0RIZ7iWCyLQtgQTS8oecFQ1XUEdxjqz5MFiMdvp0mZQsGRs4/lS+yEJ1diwJHVA3eSbBrYqKgFGUnsB3cldv0AYyEe8mZpBXVMUtG4b144ThH8mQPhjVjDLteMYh+95rMBdbO/ZaER6maOuYdJSztObBhleh3znyX4OGR7PbuWn8VGSWa/j1Y3ac0mf6tma1poVGxgAGXOzr+yITgLNvYsNSzjHCvNw5c="
    on_success: always
    on_failure: always
    template:
    - Repo `%{repository_slug}`build (<%{build_url}|#%{build_number}>) for commit
      (<%{compare_url}|%{commit}>) on branch `%{branch}` by `%{author}`.
    - 'Execution time: *%{duration}*'
    - 'Message: %{message}'
env:
  global:
  - USERNAME: snowball1990
  - EMAIL: snowballer0705@gmail.com
  - GH_REF: github.com/Damo-web/docs.git
  - BRANCHNAME: gh-pages
