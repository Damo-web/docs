language: node_js
node_js: stable
cache:
  directories:
  - node_modules
install:
- yarn install
before_script: 
script:
- yarn build
after_script:
- cd ./dist
- ls
- git init
- git config user.name "${USERNAME}"
- git config user.email "${EMAIL}"
- git add -A
- git commit -m "deploy"
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
notifications:
  slack:
    rooms:
      secure: Oc7t2TQ4DYkI+qaftnmn44r7mZ5gE+WbCOWmVxWA6ffzLriFgQcxzluxyzFBf+dui1lD1pDrO+tK/Fbcw49pGHYRJFmvNqZVN7ek9e/zbHfNpukeGKER8Sys5/DkTwHh9ZNFclF7XiuOUzwXYqUORI5BydKEDU1UKJveEaeF0LsBzmERxQOz70K/32Pzvrlr8BRdbdarHqPu6URhcrFs/2xIRHYnFJc8OjB0PBYJx1gRE8mYpPjzWJvHD7lcaXUd7QQn3DnIV3O16lMx4S99OXqu8rqq8wWQ0PtISG/0ULOSDBgUUpVzYosCH0t5CCY8mOkbLVPh+48xIKs/rrFBfLkT6Rk8tbGxL6vgLPr8Yi9rHGooLVrY26o8LvmF7gP5yG538SJ99NfWTcgNqZuxyEtQbboDVVSMCPlkGXra2dWWXNAZKyonTpGYw0JrdCliaW2SRvprYwoKphoUwvirK8pF0FjRugbT2BesDv3TcU/2gg1ZhIj2okO/R3yKl9UaIgvxNJIWOJRye9fXy7mGnRAZG2jMq70Nv2wxD1U5Jmj0SS/iQB8vMIFMwE+v7xJdrEcU+wYiSddmuQtUDvzdTvBKKzrB1WDZgf6/PKb495rQpFjzIIUnHxpyeBmu9742P+0BTy7KGU+oSa4s0W9S6kLU37XafpH8uPdDJBOnliE=
    on_success: always
    on_failure: always
    template:
    - Repo `%{repository_slug}`build (<%{build_url}|#%{build_number}>) for commit
      (<%{compare_url}|%{commit}>) on branch `%{branch}` by `%{author}`.
    - 'Execution time: *%{duration}*'
    - 'Message: %{message}'
env:
  global:
  - USERNAME: snowball1990
  - EMAIL: snowballer0705@gmail.com
  - GH_REF: github.com/Damo-web/docs.git
  - BRANCHNAME: gh-pages
