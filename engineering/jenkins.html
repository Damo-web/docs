<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jenkins CI | Damo</title>
    <meta name="description" content="达摩院文档平台">
    <link rel="shortcut icon" type="image/x-icon" href="/docs/favicon.ico">
  <link rel="manifest" href="/docs/manifest.json">
    
    <link rel="preload" href="/docs/assets/css/0.styles.ba6021e1.css" as="style"><link rel="preload" href="/docs/assets/js/app.bb5e32e8.js" as="script"><link rel="preload" href="/docs/assets/js/2.3b5bc873.js" as="script"><link rel="preload" href="/docs/assets/js/3.b55da558.js" as="script"><link rel="preload" href="/docs/assets/js/22.e56f6488.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e79ac61c.js"><link rel="prefetch" href="/docs/assets/js/11.231bcbc2.js"><link rel="prefetch" href="/docs/assets/js/12.c158b58e.js"><link rel="prefetch" href="/docs/assets/js/13.4d87ce46.js"><link rel="prefetch" href="/docs/assets/js/14.7c9ff823.js"><link rel="prefetch" href="/docs/assets/js/15.6db4bdac.js"><link rel="prefetch" href="/docs/assets/js/16.a5e840e7.js"><link rel="prefetch" href="/docs/assets/js/17.ec94b3d5.js"><link rel="prefetch" href="/docs/assets/js/18.fae32894.js"><link rel="prefetch" href="/docs/assets/js/19.0616547f.js"><link rel="prefetch" href="/docs/assets/js/20.0911ce1c.js"><link rel="prefetch" href="/docs/assets/js/21.2f377134.js"><link rel="prefetch" href="/docs/assets/js/23.a4767746.js"><link rel="prefetch" href="/docs/assets/js/24.00d42de4.js"><link rel="prefetch" href="/docs/assets/js/25.e565c20f.js"><link rel="prefetch" href="/docs/assets/js/26.ba96a6e3.js"><link rel="prefetch" href="/docs/assets/js/27.11a11261.js"><link rel="prefetch" href="/docs/assets/js/28.b49aaaba.js"><link rel="prefetch" href="/docs/assets/js/29.2e6a7a2d.js"><link rel="prefetch" href="/docs/assets/js/30.8ea5fdcf.js"><link rel="prefetch" href="/docs/assets/js/31.bb57c422.js"><link rel="prefetch" href="/docs/assets/js/32.bc41411c.js"><link rel="prefetch" href="/docs/assets/js/33.5ad4e0f7.js"><link rel="prefetch" href="/docs/assets/js/34.e046d4c9.js"><link rel="prefetch" href="/docs/assets/js/35.9fe3872e.js"><link rel="prefetch" href="/docs/assets/js/36.ba8de101.js"><link rel="prefetch" href="/docs/assets/js/37.854a398e.js"><link rel="prefetch" href="/docs/assets/js/38.bfd940cf.js"><link rel="prefetch" href="/docs/assets/js/39.599fa4d5.js"><link rel="prefetch" href="/docs/assets/js/4.ca28c6e7.js"><link rel="prefetch" href="/docs/assets/js/40.f4157755.js"><link rel="prefetch" href="/docs/assets/js/41.d78fffc0.js"><link rel="prefetch" href="/docs/assets/js/5.d10ece1f.js"><link rel="prefetch" href="/docs/assets/js/6.b76f823f.js"><link rel="prefetch" href="/docs/assets/js/7.b57c8ee5.js"><link rel="prefetch" href="/docs/assets/js/8.bc6cdd57.js"><link rel="prefetch" href="/docs/assets/js/9.454003ec.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.ba6021e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Damo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/platform/" class="nav-link">跨端</a></div><div class="nav-item"><a href="/docs/server/" class="nav-link">服务端</a></div><div class="nav-item"><a href="/docs/framework/" class="nav-link">框架</a></div><div class="nav-item"><a href="/docs/engineering/" class="nav-link router-link-active">工程化</a></div><div class="nav-item"><a href="/docs/render/" class="nav-link">渲染</a></div><div class="nav-item"><a href="/docs/media/" class="nav-link">互动媒体</a></div> <a href="https://github.com/Damo-web/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/platform/" class="nav-link">跨端</a></div><div class="nav-item"><a href="/docs/server/" class="nav-link">服务端</a></div><div class="nav-item"><a href="/docs/framework/" class="nav-link">框架</a></div><div class="nav-item"><a href="/docs/engineering/" class="nav-link router-link-active">工程化</a></div><div class="nav-item"><a href="/docs/render/" class="nav-link">渲染</a></div><div class="nav-item"><a href="/docs/media/" class="nav-link">互动媒体</a></div> <a href="https://github.com/Damo-web/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>文章列表</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/engineering/" class="sidebar-link">Webpack Optimization</a></li><li><a href="/docs/engineering/eslint.html" class="sidebar-link">ESLint</a></li><li><a href="/docs/engineering/stylelint.html" class="sidebar-link">StyleLint</a></li><li><a href="/docs/engineering/easymock.html" class="sidebar-link">EasyMock</a></li><li><a href="/docs/engineering/staticsite.html" class="sidebar-link">Static Site Generator</a></li><li><a href="/docs/engineering/ci.html" class="sidebar-link">CI / CD</a></li><li><a href="/docs/engineering/jenkins.html" class="active sidebar-link">Jenkins CI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/engineering/jenkins.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/docs/engineering/jenkins.html#说明" class="sidebar-link">说明</a></li><li class="sidebar-sub-header"><a href="/docs/engineering/jenkins.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/engineering/jenkins.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/docs/engineering/jenkins.html#参考链接" class="sidebar-link">参考链接</a></li></ul></li><li><a href="/docs/engineering/drone.html" class="sidebar-link">Drone CI</a></li><li><a href="/docs/engineering/circle.html" class="sidebar-link">Circle CI</a></li><li><a href="/docs/engineering/travis.html" class="sidebar-link">Travis CI</a></li><li><a href="/docs/engineering/harbor.html" class="sidebar-link">Harbor</a></li><li><a href="/docs/engineering/build.html" class="sidebar-link">Build Optimization</a></li><li><a href="/docs/engineering/nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/docs/engineering/domain.html" class="sidebar-link">Domain</a></li><li><a href="/docs/engineering/cdn.html" class="sidebar-link">CDN</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jenkins-ci"><a href="#jenkins-ci" aria-hidden="true" class="header-anchor">#</a> Jenkins CI</h1> <blockquote><p>本篇目为 Jenkins CI 搭建指南，以静态博客为例，覆盖构建、发布及通知流程。</p></blockquote> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>Jenkins 无疑是当下最广泛使用的开源 CI 工具，其丰富的插件系统、权限系统为企业的持续集成提供了可靠的拓展性和丰富的定制性。</p> <h2 id="说明"><a href="#说明" aria-hidden="true" class="header-anchor">#</a> 说明</h2> <p><a href="https://jenkins.io/download/" target="_blank" rel="noopener noreferrer">Jenkins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 部署方式有多种，推荐采用 Docker 或 Linux 环境来进行安装，不推荐 Mac OS 直接安装（ 修改默认配置繁琐 ）。</p> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p>本篇以阿里云 CentOS 系统为例，演示了 Jenkins 整个安装过程。</p> <p>关于阿里云的使用可参阅：<a href="https://damo-web.github.io/docs/server/" target="_blank" rel="noopener noreferrer">阿里云ECS使用指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Jenkins 依赖 Java 和 Git ，如果系统未自带，执行下述命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装 git</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token function">git</span>
<span class="token comment"># 安装 java</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> java
</code></pre></div><p>Jenkins 安装所需命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token function">sudo</span> <span class="token function">wget</span> -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo

<span class="token function">sudo</span> <span class="token function">rpm</span> --import https://jenkins-ci.org/redhat/jenkins-ci.org.key

<span class="token function">sudo</span> yum <span class="token function">install</span> jenkins

</code></pre></div><p>启动 Jenkins：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> jenkins start
<span class="token comment"># 显示如下状态即是启动成功，打开浏览器，输入阿里云服务器公网地址的 8080 端口</span>
<span class="token comment"># 需要在阿里云平台安全组规则中把端口暴露出来，才可以访问云服务器对应端口</span>
Starting jenkins <span class="token punctuation">(</span>via systemctl<span class="token punctuation">)</span>:                          <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span>
</code></pre></div><h2 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h2> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>为了避免权限所引发的问题，以下命令建议均以 root 权限进行运行。</p></div> <ol><li><p>配置云服务器安全组规则</p> <p>可按如下顺序进入安全组：</p> <blockquote><p>实例列表 =&gt; 更多 =&gt; 网络和安全组 =&gt; 安全组配置 =&gt; 配置规则 =&gt; 添加安全组规则</p></blockquote> <p><img src="/docs/assets/img/jenkins_1.1ccdc5c8.png" alt=""></p></li> <li><p>配置 Jenkins 管理员账号</p> <p>浏览器访问 Jenkins 地址 http://ali-server-ip:8080，出现如下页面：</p> <p><img src="/docs/assets/img/jenkins_2.53959353.png" alt=""></p> <p>执行如下命令，把初始的管理员密码复制进去，并安装推荐插件，创建管理员账户后，就可以进入 Jenkins 首页</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /var/lib/jenkins/secrets/initialAdminPassword
</code></pre></div></li> <li><p>配置 Jenkins 任务</p> <p>点击 Jenkins 首页面板中新建任务即可建立项目任务</p> <p><img src="/docs/assets/img/jenkins_3.69864297.png" alt=""></p></li> <li><p>配置前端项目构建插件</p> <p>构建前端项目需要配置 Node 环境，代码也需要从 Github 拉取并发布，因此需要在插件管理中安装 	<code>NodeJS Plugin</code> 、 <code>	GitHub Integration Plugin</code>、<code>Publish Over SSH</code>三个插件。</p> <p>可按如下顺序安装插件：</p> <blockquote><p>系统管理 =&gt; 插件管理 =&gt; 可选插件 =&gt; 过滤 =&gt; 勾选插件 =&gt; 直接安装</p></blockquote> <p><img src="/docs/assets/img/jenkins_4.c36ec9a2.png" alt=""></p></li> <li><p>配置 Node 环境</p> <p>首先需要配置 Node 版本及别名：</p> <blockquote><p>系统管理 =&gt; 全局工具配置 =&gt; NodeJS =&gt; NodeJS安装</p></blockquote> <p><img src="/docs/assets/img/jenkins_5.be0b111b.png" alt=""></p> <p>其次，在任务面板中进入项目配置页，配置如下：</p> <p><img src="/docs/assets/img/jenkins_6.2df4e441.png" alt=""></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>倘若系统中已安装 Node环境，也可以在 Shell 脚本里加入<code>export PATH=/usr/local/bin</code> 命令来启动 Node</p></div></li> <li><p>配置 Github Webhook</p> <p>Github 服务器相关配置主要利用 Github Webhook 来触发 Jenkins 任务的构建。</p> <p>首先需要生成 Github Personal Access Token，细节可参阅：<a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line#creating-a-token" target="_blank" rel="noopener noreferrer">Github | creating-a-personal-access-token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>其次配置包含 Github Personal Access Token 的 Jenkins 凭据以供 Github 服务器使用：</p> <p><img src="/docs/assets/img/jenkins_7.55430139.png" alt=""></p> <p>再者，补充相关服务器信息，选择刚创建的凭据进行连接测试，如下图所示，即为 Github 服务器配置成功：</p> <p><img src="/docs/assets/img/jenkins_8.1b502a1e.png" alt=""></p> <p>Github 服务器配置成功后，进入项目配置页，如下图配置即完成 Github Webhook 的全部配置工作：</p> <p><img src="/docs/assets/img/jenkins_9.e13ea70c.png" alt=""></p></li> <li><p>配置 SSH 秘钥</p> <p>通常利用 ssh-keygen 来生成秘钥对：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 执行命令，下述结果仅为执行参考</span>
ssh-keygen

<span class="token comment"># 执行结果</span>
Generating public/private rsa key pair.
Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/root/.ssh/id_rsa<span class="token punctuation">)</span>:
<span class="token comment"># passphrase 为 key 的密码，默认设置空 ，表示不需要密码</span>
Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: 
Enter same passphrase again: 
Your identification has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.
Your public key has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:YwhPC9gxq6OPmVJ7XYiKI257bSPPnfpdBc root@snowball
The key's randomart image is:
+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+
<span class="token operator">|</span>   o*o           <span class="token operator">|</span>
<span class="token operator">|</span>  oo.<span class="token operator">=</span>.          <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">=</span>o<span class="token operator">=</span><span class="token punctuation">..</span>          <span class="token operator">|</span>
<span class="token operator">|</span>+ o.o<span class="token operator">=</span>+o.        <span class="token operator">|</span>
<span class="token operator">|</span> +o. ++oS.E      <span class="token operator">|</span>
<span class="token operator">|</span><span class="token punctuation">..</span>+<span class="token punctuation">..</span> <span class="token punctuation">..</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>     <span class="token operator">|</span>
<span class="token operator">|</span>.o + <span class="token punctuation">..</span><span class="token punctuation">..</span> <span class="token builtin class-name">.</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">+=</span>.oo+. <span class="token builtin class-name">.</span>       <span class="token operator">|</span>
<span class="token operator">|</span>+<span class="token operator">+=</span><span class="token operator">=</span><span class="token operator">+=</span>.          <span class="token operator">|</span>
+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+   

<span class="token comment"># 查看私钥</span>
<span class="token function">cat</span> /root/.ssh/id_rsa
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAs1rxWQZzK+pOLbXY7vdLMoMfA85QVavrwuR06RksLImlFiXj
lDLhmYZUUijspp1Zw775+9VQxldejiCsL3mhzWSJPJ9wO5TJi1CXLn5QsEjY39dC
s5SEVq1EhqnVN0fjQqHaJn8GOOfy5bvzyTmV8WgO8Pl4CeR5vuuQbRYFDP+rjQnH
zLpeq73FiWASMRT5vIrZ1Rk92JoGN7TtBdI3ipP+O1kMimO0sATB9Rruww+lpuuZ
63jbHjPfmY24czMHbtbkpNjyDZNyvC7Mi2RNuIwcDkz4LQOJuWni
-----END RSA PRIVATE KEY-----

<span class="token comment"># 查看公钥</span>
<span class="token function">cat</span> id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAA2gQNDCo99NsjZzrkYYRZ4Uohrgt8LPXxTF0Zr3 root@snowball
</code></pre></div><p>在 Jenkins 下新建全局凭据，添加私钥，如下图所示：</p> <blockquote><p>凭据 =&gt; 系统 =&gt; 全局凭据</p></blockquote> <p><img src="/docs/assets/img/jenkins_10.64926a72.png" alt=""></p> <p>在 Github 仓库下新建 Deploy keys ，添加公钥，如下图所示：</p> <p><img src="/docs/assets/img/jenkins_11.4a6b2ebe.png" alt=""></p></li> <li><p>配置 Git 仓库</p> <p>当配置好 Github Webhook 和 SSH 秘钥，就可以进入项目配置页，配置 Git 仓库来拉取及推送代码（ 推荐采用 SSH ）：</p> <p><img src="/docs/assets/img/jenkins_12.e5d8b066.png" alt=""></p></li> <li><p>配置 Shell 命令</p> <p>进入项目配置页，配置 Shell 环境变量及命令，用来执行构建任务：</p> <p><img src="/docs/assets/img/jenkins_13.2488db17.png" alt=""></p> <p>至此，Jenkins 已可以通过源代码 push 事件实现自动化部署静态博客。</p> <p>当然，可以对部署配置做一些简单优化，比如添加 Github 链接、丢弃旧构建、删除工作区域缓存等，如下图：</p> <p><img src="/docs/assets/img/jenkins_14.65be7c8e.png" alt=""></p> <p><img src="/docs/assets/img/jenkins_15.007e0d3d.png" alt=""></p></li> <li><p>配置 Slack 通知</p> <p>Jenkins 项目自动构建完成后，需要提供相应的反馈信息，以便确定项目是否构建成功，一般情况下，可以通过邮件系统来通知。</p> <p>在团队中，项目的构建信息需要与团队成员共享，以便及时了解项目的运行状态。当然，邮件系统也能满足共享功能，但归类功能比较薄弱，此处引入 <a href="https://slack.com" target="_blank" rel="noopener noreferrer">Slack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来共享项目运行状态。</p> <p>首先，在 Slack 网站 App Directory 页面，搜索 Jenkins CI 并获取 Slack Token：</p> <p><img src="/docs/assets/img/jenkins_16.329f4f5f.png" alt=""></p> <p>在 Jenkins 下新建全局凭据，添加 Slack Token ，如下图所示：</p> <blockquote><p>凭据 =&gt; 系统 =&gt; 全局凭据</p></blockquote> <p><img src="/docs/assets/img/jenkins_17.7f4e559b.png" alt=""></p> <p>Jenkins 启用 Slack 通知机制，需要在插件管理中安装<code>Slack Notification Plugin</code>，并如下配置：</p> <img src="/docs/assets/img/jenkins_18.7e12d2aa.png" width="100%" class="zoomable"> <p>当然也可以添加自定义通知消息，如下图：</p> <p><img src="/docs/assets/img/jenkins_19.19b41d9a.png" alt=""></p> <p>至此构建完成时，便会发送构建相关信息通知到 Slack 对应的频道。</p></li></ol> <h2 id="参考链接"><a href="#参考链接" aria-hidden="true" class="header-anchor">#</a> 参考链接</h2> <ul><li><p><a href="https://medium.com/appgambit/setup-jenkins-on-centos-with-docker-for-selenium-b7dba07b9ffa" target="_blank" rel="noopener noreferrer">Setup Jenkins on CentOS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://medium.com/appgambit/integrating-jenkins-with-slack-notifications-4f14d1ce9c7a" target="_blank" rel="noopener noreferrer">Integrating Jenkins with Slack Notifications<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://www.zhihu.com/question/21402411" target="_blank" rel="noopener noreferrer">github提示Permission denied (publickey)，如何才能解决？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E7%94%9F%E6%88%90-SSH-%E5%85%AC%E9%92%A5" target="_blank" rel="noopener noreferrer">服务器上的 Git - 生成 SSH 公钥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://stackoverflow.com/questions/40495711/wedriverio-jenkins-npm-command-not-found-error" target="_blank" rel="noopener noreferrer">jenkins - npm command not found error<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.bitnami.com/azure/how-to/create-ci-pipeline/" target="_blank" rel="noopener noreferrer">Create A Continuous Integration Pipeline With GitLab And Jenkins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://medium.com/@marc_best/trigger-a-jenkins-build-from-a-github-push-b922468ef1ae" target="_blank" rel="noopener noreferrer">Triggering a Jenkins build from a push to Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://juejin.im/post/5ad1980e6fb9a028c42ea1be" target="_blank" rel="noopener noreferrer">Jenkins打造强大的前端自动化工作流<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://juejin.im/post/5c1a3282f265da61764ad51a" target="_blank" rel="noopener noreferrer">Jenkins 自动化部署实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Damo-web/docs/edit/master/docs/engineering/jenkins.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-06-03 05:47:57 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/engineering/ci.html" class="prev">CI / CD</a></span> <span class="next"><a href="/docs/engineering/drone.html">Drone CI</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.bb5e32e8.js" defer></script><script src="/docs/assets/js/2.3b5bc873.js" defer></script><script src="/docs/assets/js/3.b55da558.js" defer></script><script src="/docs/assets/js/22.e56f6488.js" defer></script>
  </body>
</html>
